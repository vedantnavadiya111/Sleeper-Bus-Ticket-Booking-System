<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sleeper Bus Ticket Booking System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #f6f8fc;
        --card: #ffffff;
        --text: #0f172a;
        --muted: #475569;
        --border: #e2e8f0;
        --shadow: 0 10px 28px rgba(15, 23, 42, 0.08);
        --shadow-soft: 0 8px 18px rgba(15, 23, 42, 0.10);

        --seat-available: #f8fafc;
        --seat-available-border: #cbd5e1;
        --seat-booked: #475569;
        --seat-selected: #2563eb;

        --focus: rgba(37, 99, 235, 0.28);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: linear-gradient(180deg, #eef3fb 0%, var(--bg) 36%, var(--bg) 100%);
        color: var(--text);
      }

      .page {
        max-width: 1180px;
        margin: 0 auto;
        padding: 28px 20px 42px;
      }

      .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 18px;
        border: 1px solid var(--border);
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.88);
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow);
      }

      .title {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .title h1 {
        font-size: 18px;
        font-weight: 700;
        margin: 0;
        letter-spacing: -0.01em;
      }

      .title .subtitle {
        margin: 0;
        font-size: 13px;
        color: var(--muted);
      }

      .legend {
        display: flex;
        gap: 14px;
        align-items: center;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--muted);
        white-space: nowrap;
      }

      .legend-swatch {
        width: 12px;
        height: 12px;
        border-radius: 4px;
        border: 1px solid var(--seat-available-border);
        background: var(--seat-available);
      }

      .legend-swatch.booked {
        background: var(--seat-booked);
        border-color: var(--seat-booked);
      }

      .legend-swatch.selected {
        background: var(--seat-selected);
        border-color: var(--seat-selected);
      }

      .content {
        display: grid;
        grid-template-columns: 1.3fr 0.9fr;
        gap: 18px;
        margin-top: 18px;
      }

      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: var(--shadow-soft);
      }

      .card-header {
        padding: 16px 16px 12px;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 12px;
      }

      .card-header h2 {
        margin: 0;
        font-size: 14px;
        font-weight: 700;
      }

      .card-header p {
        margin: 0;
        font-size: 12px;
        color: var(--muted);
      }

      .bus-area {
        padding: 16px;
      }

      .bus-shell {
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 14px;
        background: linear-gradient(180deg, #ffffff 0%, #fbfdff 100%);
      }

      .bus-topline {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .bus-pill {
        font-size: 12px;
        color: var(--muted);
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: 6px 10px;
        background: #ffffff;
      }

      .decks {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .deck {
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 12px;
        background: #ffffff;
      }

      .deck-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        gap: 10px;
      }

      .deck-title h3 {
        margin: 0;
        font-size: 12px;
        font-weight: 700;
        color: var(--text);
        letter-spacing: 0.01em;
      }

      .deck-title span {
        font-size: 12px;
        color: var(--muted);
      }

      .seat-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 26px 1fr;
        gap: 10px;
        align-items: center;
      }

      .aisle {
        height: 100%;
        border-radius: 10px;
        border: 1px dashed #cbd5e1;
        background: linear-gradient(180deg, rgba(226, 232, 240, 0.25) 0%, rgba(226, 232, 240, 0.12) 100%);
      }

      .seat {
        height: 28px;
        border-radius: 8px;
        border: 1px solid var(--seat-available-border);
        background: var(--seat-available);
        color: #0f172a;
        font-size: 11px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
        user-select: none;
      }

      .seat:hover {
        box-shadow: 0 8px 14px rgba(15, 23, 42, 0.10);
        transform: translateY(-1px);
      }

      .seat:focus-visible {
        outline: none;
        box-shadow: 0 0 0 4px var(--focus);
      }

      .seat.booked {
        background: var(--seat-booked);
        border-color: var(--seat-booked);
        color: rgba(255, 255, 255, 0.90);
        cursor: not-allowed;
      }

      .seat.booked:hover {
        box-shadow: none;
        transform: none;
      }

      .seat.selected {
        background: var(--seat-selected);
        border-color: var(--seat-selected);
        color: #ffffff;
        box-shadow: 0 10px 18px rgba(37, 99, 235, 0.22);
      }

      .summary {
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .summary-body {
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 14px;
      }

      .muted {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.4;
        margin: 0;
      }

      .detail-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 12px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: #fbfdff;
      }

      .detail-row .label {
        font-size: 12px;
        color: var(--muted);
      }

      .detail-row .value {
        font-size: 13px;
        font-weight: 700;
        color: var(--text);
      }

      label {
        display: block;
        font-size: 12px;
        font-weight: 600;
        color: var(--text);
        margin-bottom: 8px;
      }

      .select-field {
        position: relative;
      }

      .select-field::after {
        content: "";
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        pointer-events: none;
        opacity: 0.85;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 16px 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 20 20'%3E%3Cpath fill='%23475569' d='M5.6 7.8a1 1 0 0 1 1.4 0L10 10.8l3-3a1 1 0 1 1 1.4 1.4l-3.7 3.7a1 1 0 0 1-1.4 0L5.6 9.2a1 1 0 0 1 0-1.4Z'/%3E%3C/svg%3E");
      }

      select {
        width: 100%;
        height: 44px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: #ffffff;
        padding: 0 40px 0 12px;
        font-family: inherit;
        font-size: 14px;
        font-weight: 600;
        color: var(--text);
        box-shadow: 0 6px 14px rgba(15, 23, 42, 0.06);
        outline: none;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
      }

      select:focus {
        border-color: #93c5fd;
        box-shadow: 0 0 0 4px rgba(147, 197, 253, 0.35);
      }

      .summary-placeholder {
        border: 1px dashed #cbd5e1;
        border-radius: 14px;
        padding: 14px;
        background: rgba(248, 250, 252, 0.7);
      }

      .steps {
        display: flex;
        gap: 10px;
        align-items: stretch;
        margin-bottom: 6px;
      }

      .step {
        flex: 1;
        border: 1px solid var(--border);
        background: #ffffff;
        border-radius: 12px;
        padding: 10px 10px;
        display: flex;
        gap: 10px;
        align-items: center;
        min-height: 44px;
        color: var(--muted);
      }

      .step .step-number {
        width: 22px;
        height: 22px;
        border-radius: 999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 700;
        border: 1px solid var(--border);
        background: #f8fafc;
        color: var(--muted);
        flex: 0 0 auto;
      }

      .step .step-label {
        display: flex;
        flex-direction: column;
        gap: 2px;
        min-width: 0;
      }

      .step .step-label strong {
        font-size: 12px;
        font-weight: 700;
        color: var(--text);
      }

      .step .step-label span {
        font-size: 11px;
        color: var(--muted);
        line-height: 1.2;
      }

      .step.active {
        border-color: rgba(37, 99, 235, 0.35);
        box-shadow: 0 10px 18px rgba(37, 99, 235, 0.10);
      }

      .step.active .step-number {
        border-color: rgba(37, 99, 235, 0.45);
        color: #1d4ed8;
        background: rgba(37, 99, 235, 0.06);
      }

      .step.completed .step-number {
        border-color: var(--seat-selected);
        background: var(--seat-selected);
        color: #ffffff;
      }

      .actions {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .btn-primary {
        width: 100%;
        height: 42px;
        border-radius: 12px;
        border: 1px solid rgba(37, 99, 235, 0.35);
        background: var(--seat-selected);
        color: #ffffff;
        font-weight: 700;
        font-size: 13px;
        cursor: pointer;
        box-shadow: 0 10px 18px rgba(37, 99, 235, 0.18);
        transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
      }

      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 22px rgba(37, 99, 235, 0.22);
      }

      .btn-primary:focus-visible {
        outline: none;
        box-shadow: 0 0 0 4px var(--focus), 0 14px 22px rgba(37, 99, 235, 0.22);
      }

      .btn-primary:disabled {
        opacity: 0.55;
        cursor: not-allowed;
        transform: none;
        box-shadow: 0 8px 16px rgba(15, 23, 42, 0.08);
        background: #94a3b8;
        border-color: #94a3b8;
      }

      .hidden {
        display: none;
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      .field {
        min-width: 0;
      }

      .helper-text {
        margin: 8px 0 0;
        font-size: 12px;
        color: var(--muted);
        line-height: 1.4;
      }

      .helper-text.error {
        color: #b91c1c;
      }

      @media (max-width: 980px) {
        .content {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <div class="page">
      <header class="topbar">
        <div class="title">
          <h1>Ahmedabad → Mumbai Express</h1>
          <p class="subtitle">Sleeper coach layout with meal integration preview</p>
        </div>
        <div class="legend" aria-label="Seat status legend">
          <div class="legend-item"><span class="legend-swatch"></span> Available</div>
          <div class="legend-item"><span class="legend-swatch booked"></span> Booked</div>
          <div class="legend-item"><span class="legend-swatch selected"></span> Selected</div>
        </div>
      </header>

      <main class="content">
        <section class="card" aria-label="Bus seat layout">
          <div class="card-header">
            <div>
              <h2>Select Your Sleeper Seat</h2>
              <p>2-left / aisle / 1-right layout</p>
            </div>
            <div class="bus-pill">Departure: 22:30</div>
          </div>

          <div class="bus-area">
            <div class="bus-shell">
              <div class="bus-topline">
                <div class="bus-pill">Pickup: Ahmedabad (Paldi)</div>
                <div class="bus-pill">Drop: Mumbai (Dadar)</div>
              </div>

              <div class="decks">
                <div class="deck">
                  <div class="deck-title">
                    <h3>Upper Deck</h3>
                    <span>U01–U15</span>
                  </div>
                  <div class="seat-grid" role="grid" aria-label="Upper deck seats">
                    <button class="seat booked" type="button" data-seat="U01" aria-disabled="true">U01</button>
                    <button class="seat" type="button" data-seat="U02">U02</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="U03">U03</button>

                    <button class="seat" type="button" data-seat="U04">U04</button>
                    <button class="seat" type="button" data-seat="U05">U05</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat booked" type="button" data-seat="U06" aria-disabled="true">U06</button>

                    <button class="seat" type="button" data-seat="U07">U07</button>
                    <button class="seat" type="button" data-seat="U08">U08</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="U09">U09</button>

                    <button class="seat" type="button" data-seat="U10">U10</button>
                    <button class="seat booked" type="button" data-seat="U11" aria-disabled="true">U11</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="U12">U12</button>

                    <button class="seat" type="button" data-seat="U13">U13</button>
                    <button class="seat" type="button" data-seat="U14">U14</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat booked" type="button" data-seat="U15" aria-disabled="true">U15</button>
                  </div>
                </div>

                <div class="deck">
                  <div class="deck-title">
                    <h3>Lower Deck</h3>
                    <span>L01–L15</span>
                  </div>
                  <div class="seat-grid" role="grid" aria-label="Lower deck seats">
                    <button class="seat" type="button" data-seat="L01">L01</button>
                    <button class="seat booked" type="button" data-seat="L02" aria-disabled="true">L02</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="L03">L03</button>

                    <button class="seat" type="button" data-seat="L04">L04</button>
                    <button class="seat" type="button" data-seat="L05">L05</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="L06">L06</button>

                    <button class="seat booked" type="button" data-seat="L07" aria-disabled="true">L07</button>
                    <button class="seat" type="button" data-seat="L08">L08</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="L09">L09</button>

                    <button class="seat" type="button" data-seat="L10">L10</button>
                    <button class="seat" type="button" data-seat="L11">L11</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat booked" type="button" data-seat="L12" aria-disabled="true">L12</button>

                    <button class="seat" type="button" data-seat="L13">L13</button>
                    <button class="seat" type="button" data-seat="L14">L14</button>
                    <div class="aisle" aria-hidden="true"></div>
                    <button class="seat" type="button" data-seat="L15">L15</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <aside class="card" aria-label="Booking summary">
          <div class="card-header">
            <div>
              <h2>Booking Summary</h2>
              <p>Seat selection and meal preference</p>
            </div>
          </div>

          <div class="summary-body">
            <div id="summaryEmpty" class="summary-placeholder">
              <p class="muted">
                Select an available seat to view your booking summary.
              </p>
            </div>

            <div id="summaryPanel" class="hidden">
              <div class="steps" aria-label="Booking flow steps">
                <div id="stepSeat" class="step active">
                  <div class="step-number">1</div>
                  <div class="step-label">
                    <strong>Select Seat</strong>
                    <span>Choose an available sleeper</span>
                  </div>
                </div>
                <div id="stepMeal" class="step">
                  <div class="step-number">2</div>
                  <div class="step-label">
                    <strong>Trip Details</strong>
                    <span>Pickup, drop, meal</span>
                  </div>
                </div>
                <div id="stepConfirm" class="step">
                  <div class="step-number">3</div>
                  <div class="step-label">
                    <strong>Review</strong>
                    <span>Confirm booking</span>
                  </div>
                </div>
              </div>

              <div class="detail-row">
                <div class="label">Route</div>
                <div id="routeValue" class="value">Ahmedabad (Paldi) → Mumbai (Dadar)</div>
              </div>

              <div class="form-grid" aria-label="Pickup and drop selection">
                <div class="field">
                  <label for="pickupSelect">Pickup Station</label>
                  <div class="select-field">
                    <select id="pickupSelect" name="pickup"></select>
                  </div>
                </div>
                <div class="field">
                  <label for="dropSelect">Drop Station</label>
                  <div class="select-field">
                    <select id="dropSelect" name="drop"></select>
                  </div>
                </div>
              </div>
              <p id="routeError" class="helper-text error hidden">Pickup must be before drop.</p>

              <div class="detail-row">
                <div class="label">Selected Seat</div>
                <div id="selectedSeatValue" class="value">—</div>
              </div>

              <div>
                <label for="mealSelect">Select Meal</label>
                <div class="select-field">
                  <select id="mealSelect" name="meal">
                    <option value="None">None</option>
                    <option value="Veg Thali">Veg Thali</option>
                    <option value="Jain Thali">Jain Thali</option>
                    <option value="Non-Veg Thali">Non-Veg Thali</option>
                    <option value="Veg Biryani">Veg Biryani</option>
                    <option value="Chicken Biryani">Chicken Biryani</option>
                    <option value="Paneer Roll">Paneer Roll</option>
                    <option value="Grilled Sandwich">Grilled Sandwich</option>
                    <option value="Idli Sambar">Idli Sambar</option>
                    <option value="Masala Dosa">Masala Dosa</option>
                    <option value="Poha">Poha</option>
                    <option value="Fruit Bowl">Fruit Bowl</option>
                  </select>
                </div>
              </div>

              <div class="actions">
                <button id="confirmButton" class="btn-primary" type="button" disabled>
                  Confirm Booking
                </button>
              </div>

              <p class="muted">
                This prototype demonstrates selection states and layout only.
              </p>
            </div>
          </div>
        </aside>
      </main>
    </div>

    <script>
      (function () {
        const seats = Array.from(document.querySelectorAll('.seat'));
        const summaryEmpty = document.getElementById('summaryEmpty');
        const summaryPanel = document.getElementById('summaryPanel');
        const selectedSeatValue = document.getElementById('selectedSeatValue');
        const confirmButton = document.getElementById('confirmButton');
        const stepSeat = document.getElementById('stepSeat');
        const stepMeal = document.getElementById('stepMeal');
        const stepConfirm = document.getElementById('stepConfirm');
        const pickupSelect = document.getElementById('pickupSelect');
        const dropSelect = document.getElementById('dropSelect');
        const routeValue = document.getElementById('routeValue');
        const routeError = document.getElementById('routeError');

        const stations = [
          'Ahmedabad (Paldi)',
          'Nadiad',
          'Anand',
          'Vadodara',
          'Bharuch',
          'Surat',
          'Navsari',
          'Valsad',
          'Vapi',
          'Mumbai (Dadar)'
        ];

        function buildStationOption(name) {
          const option = document.createElement('option');
          option.value = name;
          option.textContent = name;
          return option;
        }

        function initializeStations() {
          stations.forEach((name) => {
            pickupSelect.appendChild(buildStationOption(name));
            dropSelect.appendChild(buildStationOption(name));
          });

          pickupSelect.value = stations[0];
          dropSelect.value = stations[stations.length - 1];
          updateRouteUI();
        }

        function stationIndex(name) {
          return stations.indexOf(name);
        }

        function updateRouteUI() {
          routeValue.textContent = `${pickupSelect.value} → ${dropSelect.value}`;
        }

        function ensureValidRoute() {
          const pickupIndex = stationIndex(pickupSelect.value);
          const dropIndex = stationIndex(dropSelect.value);

          if (pickupIndex === -1 || dropIndex === -1) {
            routeError.classList.remove('hidden');
            confirmButton.setAttribute('disabled', 'disabled');
            return false;
          }

          if (pickupIndex >= dropIndex) {
            routeError.classList.remove('hidden');

            if (pickupIndex < stations.length - 1) {
              dropSelect.value = stations[pickupIndex + 1];
            } else {
              pickupSelect.value = stations[stations.length - 2];
              dropSelect.value = stations[stations.length - 1];
            }
          } else {
            routeError.classList.add('hidden');
          }

          updateRouteUI();
          return routeError.classList.contains('hidden');
        }

        function setFlowState(hasSelection) {
          if (!hasSelection) {
            stepSeat.classList.add('active');
            stepSeat.classList.remove('completed');

            stepMeal.classList.remove('active');
            stepMeal.classList.remove('completed');

            stepConfirm.classList.remove('active');
            stepConfirm.classList.remove('completed');

            confirmButton.setAttribute('disabled', 'disabled');
            return;
          }

          stepSeat.classList.remove('active');
          stepSeat.classList.add('completed');

          stepMeal.classList.add('active');
          stepMeal.classList.remove('completed');

          stepConfirm.classList.add('active');
          stepConfirm.classList.remove('completed');

          confirmButton.removeAttribute('disabled');
        }

        function clearSelection() {
          seats.forEach((seat) => seat.classList.remove('selected'));
        }

        function showSummaryForSeat(seatLabel) {
          selectedSeatValue.textContent = seatLabel;
          summaryEmpty.classList.add('hidden');
          summaryPanel.classList.remove('hidden');
          setFlowState(true);
          ensureValidRoute();
        }

        function hideSummary() {
          summaryPanel.classList.add('hidden');
          summaryEmpty.classList.remove('hidden');
          selectedSeatValue.textContent = '—';
          setFlowState(false);
        }

        confirmButton.addEventListener('click', () => {
          if (!ensureValidRoute()) {
            return;
          }
          stepMeal.classList.remove('active');
          stepMeal.classList.add('completed');

          stepConfirm.classList.remove('active');
          stepConfirm.classList.add('completed');
        });

        seats.forEach((seat) => {
          if (seat.classList.contains('booked')) {
            seat.setAttribute('disabled', 'disabled');
            return;
          }

          seat.addEventListener('click', () => {
            const seatLabel = seat.getAttribute('data-seat');
            const isSelected = seat.classList.contains('selected');

            if (isSelected) {
              seat.classList.remove('selected');
              hideSummary();
              return;
            }

            clearSelection();
            seat.classList.add('selected');
            showSummaryForSeat(seatLabel);
          });
        });

        pickupSelect.addEventListener('change', () => {
          ensureValidRoute();
        });

        dropSelect.addEventListener('change', () => {
          ensureValidRoute();
        });

        initializeStations();
        setFlowState(false);
      })();
    </script>
  </body>
</html>
